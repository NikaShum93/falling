<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>–†–µ–¥–∞–∫—Ç–æ—Ä Falling Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background:#111;
      color:#fff;
      font-family: Arial, sans-serif;
      margin:0;
      padding:20px;
    }
    h1 { color:#0ff; text-align:center; }
    h2 {
      margin-top:25px;
      color:#ff4081;
      border-bottom:1px solid #333;
      padding-bottom:4px;
    }
    label { display:block; margin:8px 0 4px; font-weight:bold; }
    input, select {
      padding:6px 10px;
      font-size:15px;
      border-radius:6px;
      border:none;
      margin-bottom:10px;
      width:100%;
    }
    input[type="color"] {
      padding:0;
      height:40px;
    }
    input[type="checkbox"] {
      display:inline-block;
      width:auto;
      margin-right:6px;
    }
    .section {
      background:#1b1b1b;
      padding:15px;
      margin-bottom:20px;
      border-radius:10px;
      box-shadow:0 0 10px rgba(0,255,255,0.2);
    }
    .effect-group {
      display:flex;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }
    .preview {
      margin-top:15px;
      padding:20px;
      background:#222;
      text-align:center;
      border-radius:12px;
      min-height:100px;
    }
    #iframeCode {
      width:100%;
      height:120px;
      margin-top:20px;
    }
  </style>
</head>
<body>
  <h1>üéÆ –†–µ–¥–∞–∫—Ç–æ—Ä Falling Game</h1>

  <div class="section">
    <h2>üåç –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
    <label>–Ø–∑—ã–∫:</label>
    <select id="language">
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="en">English</option>
      <option value="de">Deutsch</option>
      <option value="fr">Fran√ßais</option>
      <option value="es">Espa√±ol</option>
      <option value="zh">‰∏≠Êñá</option>
      <option value="ja">Êó•Êú¨Ë™û</option>
    </select>

    <label>–®—Ä–∏—Ñ—Ç:</label>
    <select id="fontFamily"></select>

    <label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (px):</label>
    <input type="number" id="fontSize" value="28">

    <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞:</label>
    <input type="color" id="textColor" value="#ffffff">

    <label>–ö—É—Ä—Å–æ—Ä (URL):</label>
    <input type="text" id="cursor" placeholder="https://.../cursor.png">

    <label><input type="checkbox" id="randomLevels"> –†–∞–Ω–¥–æ–º–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —É—Ä–æ–≤–Ω–µ–π</label>
  </div>

  <div class="section">
    <h2>üé® –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π)</h2>

    <label>–§–∏–≥—É—Ä–∞:</label>
    <select id="shape">
      <option value="rect">–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫</option>
      <option value="rounded">–°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–π</option>
      <option value="circle">–ö—Ä—É–≥</option>
      <option value="diamond">–†–æ–º–±</option>
      <option value="star">–ó–≤–µ–∑–¥–∞</option>
    </select>

    <label>–§–æ–Ω ‚Äî —Ü–≤–µ—Ç:</label>
    <input type="color" id="bgColor" value="#222222">

    <label>–§–æ–Ω ‚Äî –∫–∞—Ä—Ç–∏–Ω–∫–∞ (URL, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
    <input type="text" id="bgImage" placeholder="https://.../cloud.png">

    <h3>‚¨õ –†–∞–º–∫–∞</h3>
    <label><input type="checkbox" id="borderOn"> –í–∫–ª—é—á–∏—Ç—å —Ä–∞–º–∫—É</label>
    <label>–†–∞–º–∫–∞ (—Ü–≤–µ—Ç):</label>
    <input type="color" id="borderColor" value="#ffffff">
    <label>–†–∞–º–∫–∞ (—Ç–æ–ª—â–∏–Ω–∞, px):</label>
    <input type="number" id="borderWidth" value="1">

    <h3>‚ú® –≠—Ñ—Ñ–µ–∫—Ç—ã</h3>
    <div class="effect-group">
      <label><input type="checkbox" id="shadow"> –¢–µ–Ω—å</label>
      <label><input type="checkbox" id="glow"> –ü–æ–¥—Å–≤–µ—Ç–∫–∞</label>
      <input type="color" id="glowColor" value="#00ffff">
      <label><input type="checkbox" id="fx3d"> 3D —ç—Ñ—Ñ–µ–∫—Ç</label>
    </div>

    <label>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞ (0‚Äì1):</label>
    <input type="range" id="opacity" min="0" max="1" step="0.1" value="1">
    <input type="number" id="opacityNumber" min="0" max="1" step="0.1" value="1">

    <label>‚è¨ –°–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è (1‚Äì10):</label>
    <input type="range" id="fallSpeed" min="1" max="10" step="1" value="3">
    <input type="number" id="fallSpeedNumber" min="1" max="10" step="1" value="3">

    <div class="preview" id="preview">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —ç–ª–µ–º–µ–Ω—Ç–∞</div>
  </div>

  <div class="section">
    <h2>üéØ –£—Ä–æ–≤–Ω–∏</h2>
    <div id="levels"></div>
    <button onclick="addLevel()">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
  </div>

  <div class="section">
    <h2>üì§ –ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ Genially</h2>
    <textarea id="iframeCode" readonly></textarea>
  </div>

<script>
  const fonts = {
    ru:["Arial","Roboto","PT Sans","Rubik","Marck Script"],
    en:["Arial","Verdana","Times New Roman","Georgia","Comic Sans MS"],
    de:["Arial","Tahoma","Fira Sans","Noto Sans","Roboto"],
    fr:["Arial","Courgette","Lobster","Merriweather","Open Sans"],
    es:["Arial","Montserrat","Raleway","Roboto Slab","Ubuntu"],
    zh:["Noto Sans SC","SimHei","KaiTi","FangSong","Microsoft YaHei"],
    ja:["Noto Sans JP","Hiragino Kaku Gothic Pro","Yu Gothic","Meiryo","MS PGothic"]
  };

  function updateFonts(){
    const lang=document.getElementById("language").value;
    const ff=document.getElementById("fontFamily");
    ff.innerHTML="";
    fonts[lang].forEach(f=>{
      const opt=document.createElement("option");
      opt.value=f; opt.textContent=f;
      ff.appendChild(opt);
    });
  }
  document.getElementById("language").addEventListener("change",updateFonts);
  updateFonts();

  // —Å–≤—è–∑—å range <-> number –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
  const opacity=document.getElementById("opacity");
  const opacityNum=document.getElementById("opacityNumber");
  opacity.addEventListener("input",()=>opacityNum.value=opacity.value);
  opacityNum.addEventListener("input",()=>opacity.value=opacityNum.value);

  // —Å–≤—è–∑—å –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
  const fallSpeed=document.getElementById("fallSpeed");
  const fallSpeedNum=document.getElementById("fallSpeedNumber");
  fallSpeed.addEventListener("input",()=>fallSpeedNum.value=fallSpeed.value);
  fallSpeedNum.addEventListener("input",()=>fallSpeed.value=fallSpeedNum.value);

  function updatePreview(){
    const prev=document.getElementById("preview");
    prev.style.fontFamily=document.getElementById("fontFamily").value;
    prev.style.fontSize=document.getElementById("fontSize").value+"px";
    prev.style.color=document.getElementById("textColor").value;
    prev.style.border="none";
    prev.style.background=document.getElementById("bgColor").value;

    if(document.getElementById("bgImage").value){
      prev.style.background=`url(${document.getElementById("bgImage").value}) center/contain no-repeat`;
    }

    if(document.getElementById("borderOn").checked){
      prev.style.border=document.getElementById("borderWidth").value+"px solid "+document.getElementById("borderColor").value;
    }
    prev.style.boxShadow="none";
    if(document.getElementById("shadow").checked){
      prev.style.boxShadow="0 4px 10px rgba(0,0,0,0.5)";
    }
    if(document.getElementById("glow").checked){
      prev.style.boxShadow=`0 0 15px ${document.getElementById("glowColor").value}`;
    }
    if(document.getElementById("fx3d").checked){
      prev.style.boxShadow="7px 7px 20px rgba(0,0,0,0.5), inset -5px -5px 12px rgba(255,255,255,.22)";
    }
    prev.style.opacity=document.getElementById("opacity").value;
    prev.textContent="–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞";
  }

  document.querySelectorAll("input,select").forEach(el=>{
    el.addEventListener("input",updatePreview);
  });
  updatePreview();

  // —É—Ä–æ–≤–Ω–∏
  let levelCount=0;
  function addLevel(){
    levelCount++;
    const div=document.createElement("div");
    div.className="level";
    div.innerHTML=`
      <h3>–£—Ä–æ–≤–µ–Ω—å ${levelCount}</h3>
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ (—Ç–∞—Ä–≥–µ—Ç):</label>
      <input type="text" class="target">
      <label>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:</label>
      <textarea class="correct" rows="3" style="width:100%"></textarea>
      <label>–û—Ç–≤–ª–µ–∫–∞—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:</label>
      <textarea class="wrong" rows="3" style="width:100%"></textarea>
      <label>–¢–∞–π–º–µ—Ä (—Å–µ–∫):</label>
      <input type="number" class="timer" value="30">
      <hr>
    `;
    document.getElementById("levels").appendChild(div);
  }

  function generateIframe(){
    const id="falling-"+Date.now();
    const config={
      language:document.getElementById("language").value,
      font:document.getElementById("fontFamily").value,
      fontSize:+document.getElementById("fontSize").value,
      textColor:document.getElementById("textColor").value,
      cursor:document.getElementById("cursor").value,
      randomLevels:document.getElementById("randomLevels").checked,
      fallSpeed:+document.getElementById("fallSpeed").value,
      style:{
        shape:document.getElementById("shape").value,
        bgColor:document.getElementById("bgColor").value,
        bgImage:document.getElementById("bgImage").value,
        borderOn:document.getElementById("borderOn").checked,
        borderColor:document.getElementById("borderColor").value,
        borderWidth:+document.getElementById("borderWidth").value,
        shadow:document.getElementById("shadow").checked,
        glow:document.getElementById("glow").checked,
        glowColor:document.getElementById("glowColor").value,
        fx3d:document.getElementById("fx3d").checked,
        opacity:+document.getElementById("opacity").value
      },
      levels:[]
    };
    document.querySelectorAll(".level").forEach(l=>{
      config.levels.push({
        target:l.querySelector(".target").value,
        correct:l.querySelector(".correct").value.split("\n").filter(x=>x.trim()!=""),
        wrong:l.querySelector(".wrong").value.split("\n").filter(x=>x.trim()!=""),
        timer:+l.querySelector(".timer").value
      });
    });
    const iframe=`<iframe src="main.html?id=${id}" width="800" height="600"></iframe>`;
    document.getElementById("iframeCode").value=iframe;
    console.log("Config",config); // –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø—É—à –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  }

  // –≥–µ–Ω–µ—Ä–∏–º iframe –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
  document.querySelectorAll("input,select,textarea").forEach(el=>{
    el.addEventListener("input",generateIframe);
  });
</script>
</body>
</html>
